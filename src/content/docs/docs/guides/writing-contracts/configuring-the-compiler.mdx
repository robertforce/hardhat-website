---
title: Configuring the compiler
description: How to configure the compiler
sidebar:
  order: 4
---

Solidity compilation in Hardhat is fully customizable. This guide explains the main ways in which compilation can be configured.

## Configuring the compiler version and settings

The simplest way to configure compilation is to specify the solc compiler version and, optionally, its settings:

```ts {"Optional settings:": 8-11}
// hardhat.config.ts
import { defineConfig } from "hardhat/config";

export default defineConfig({
  //...
  solidity: {
    version: "0.8.29",

    settings: {
      /* solc settings, as expected by solc */
    },
  },
});
```

### Enabling the optimizer

One common use of settings is enabling optimizations. You can also define the number of runs, which affects how the optimizer balances code size and execution cost:

```ts
// hardhat.config.ts
import { defineConfig } from "hardhat/config";

export default defineConfig({
  //...
  solidity: {
    version: "0.8.29",
    settings: {
      optimizer: {
        enabled: true,
        runs: 200,
      },
    },
  },
});
```

### Enabling `viaIR`

Another use case is enabling the [IR-based code generator](https://docs.soliditylang.org/en/latest/ir-breaking-changes.html). This compilation mode can be slower, but it enables more powerful optimizations:

```ts
// hardhat.config.ts
import { defineConfig } from "hardhat/config";

export default defineConfig({
  //...
  solidity: {
    version: "0.8.29",
    settings: {
      viaIR: true,
    },
  },
});
```

### Other settings

The `settings` property accepts the same options supported by the chosen compiler version. For the full details, check [solc's documentation](https://docs.soliditylang.org/en/latest/).

:::tip
You can also configure multiple Solidity versions in the same project. Check [our cookbook recipe](/docs/cookbook/multiple-solidity-versions) to learn how.
:::

## Using a custom compiler

Hardhat supports custom compilers like [solx](https://solx.zksync.io). You need to manually download the compiler binary (e.g. [solx releases page](https://github.com/matter-labs/solx/releases)) and reference it in the Solidity settings of the `hardhat.config.ts` file.

You can configure the path to the custom compiler binary using the `path` property. This property can be used in both the simple and extended formats of the `solidity` property. For example, using the simple format:

```ts
// hardhat.config.ts
import { defineConfig } from "hardhat/config";

export default defineConfig({
  //...
  solidity: {
    version: "0.8.29",
    path: "/path/to/solx", // Replace with the actual path to the solx binary
  },
});
```

Or using the extended format:

```ts
// hardhat.config.ts
import { defineConfig } from "hardhat/config";

export default defineConfig({
  //...
  solidity: {
    compilers: [
      {
        version: "0.8.29",
        path: "/path/to/solx",
      },
    ],
  },
});
```

## Generating artifacts from npm dependencies

By default, Hardhat generates compilation artifacts for all the contracts in your project, but not for those in the project's npm dependencies. If you want to generate artifacts for a specific file in a dependency, you can use the `npmFilesToBuild` property:

```ts
// hardhat.config.ts
import { defineConfig } from "hardhat/config";

export default defineConfig({
  // ...
  solidity: {
    version: "0.8.29",
    npmFilesToBuild: ["some-dependency/contracts/SomeContract.sol"],
  },
});
```

Artifacts can be used to deploy contracts or to obtain their ABIs, among other things. For example, once you've configured Hardhat to generate artifacts for `some-dependency/contracts/SomeContract.sol`, you can use that contract in a TypeScript test:

```ts
const someContract = await viem.deployContract("SomeContract");
```

---
title: Writing scripts with Hardhat
description: How to write and run Hardhat scripts
sidebar:
  label: Writing scripts with Hardhat
---

import Run from "@hh/Run.astro";

In this guide we will go through the steps of creating a script with Hardhat. For a general overview of using Hardhat refer to the [Getting started guide](/docs/getting-started).

You can write your own custom scripts that can use all of Hardhat's functionality; for example, in this guide, we will work through scripts that print the list of available accounts.

There are two ways of writing a script that accesses the Hardhat Runtime Environment.

## Running scripts with the Hardhat CLI

You can write scripts that access the Hardhat Runtime Environment's properties as global variables.

These scripts must be run through Hardhat:

<Run command="hardhat run scripts/accounts.ts" />

This makes it easy to port scripts that were developed for other tools and that inject variables into the global state.

## Standalone scripts: using Hardhat as a library

The second option leverages Hardhat's architecture to allow for more flexibility. Hardhat has been designed as a library, allowing you to get creative and build standalone CLI tools that access your development environment. This means that by simply importing it:

```ts
import hre from "hardhat";
```

You can get also access to all your tasks and plugins. To try this out, create a new directory called `scripts` in your project's root directory. Then, inside that directory, create a file called `accounts.ts` with the following content:

```ts
import hre from "hardhat";

async function main() {
  const { provider } = await hre.network.connect();
  const accounts = await provider.request({ method: "eth_accounts" });

  if (accounts !== null) {
    for (const account of accounts) {
      console.log(account);
    }
  } else {
    console.log("No accounts found");
  }
}

main().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
```

Now run the script:

```sh
node scripts/accounts.ts
```

By accessing the Hardhat Runtime Environment at the top, you are allowed to run the script in a standalone fashion.

### Hardhat arguments

You can still pass arguments to Hardhat when running a standalone script. This is done by setting environment variables. Some of these are:

- `HARDHAT_NETWORK`: Sets the network to connect to.

- `HARDHAT_SHOW_STACK_TRACES`: Enables JavaScript stack traces of expected errors.

- `HARDHAT_VERBOSE`: Enables Hardhat verbose logging.

- `HARDHAT_MAX_MEMORY`: Sets the maximum amount of memory that Hardhat can use.

<Run command="hardhat --network localhost run scripts/accounts.ts" />

You can also do this when running a standalone script with Node.js:

```sh
HARDHAT_NETWORK=localhost node scripts/accounts.ts
```

{/* Check our [Environment variables](/hardhat-runner/docs/reference/environment-variables) reference to learn more about this. */}

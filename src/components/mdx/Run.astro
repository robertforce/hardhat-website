---
import { TabItem, Tabs } from "@astrojs/starlight/components";
import { Code } from "@astrojs/starlight/components";

interface Props {
  /**
   * The command to run with the package manager.
   * If an array is provided, each of them will be run in a new line.
   */
  command: string | string[];
  /**
   * A prefix to be added to each command.
   * This is helpful to define env variables.
   */
  prefix?: string;
}

const { command } = Astro.props;
const prefix = Astro.props.prefix ? `${Astro.props.prefix} ` : "";
const commands = Array.isArray(command) ? command : [command];
---

<Tabs syncKey="package-manager">
  <TabItem label="npm" icon="npm">
    <Code
      code={commands.map((c) => `${prefix}npx ${c}`).join("\n")}
      lang="sh"
      frame="terminal"
    />
  </TabItem>

  <TabItem label="pnpm" icon="pnpm">
    <Code
      code={commands.map((c) => `${prefix}pnpm ${c}`).join("\n")}
      lang="sh"
      frame="terminal"
    />
  </TabItem>
  <TabItem label="Yarn" icon="seti:yarn">
    <Code
      code={commands.map((c) => `${prefix}yarn ${c}`).join("\n")}
      lang="sh"
      frame="terminal"
    />
  </TabItem>
</Tabs>
